# 流程控制

# 循环

```sh
#!/bin/sh

i=1

while [ $i -le 50 ]
do
    userdel -r stud${i}
    i=$(($i+1 ))
done
```

# 异常处理

将上述的命令进行简要封装，可以得到如下脚本：

```sh
# 脚本执行配置: https://intoli.com/blog/exit-on-errors-in-bash-scripts/
set -e
# keep track of the last executed command
trap 'last_command=$current_command; current_command=$BASH_COMMAND;' DEBUG
# echo an error message before exiting
trap '
err_code=$?;
err_command=${last_command};
if [ "$err_code" != "0" ]; then
  echo "\"${err_command}\" 命令异常退出 $err_code."
fi
' EXIT
```
