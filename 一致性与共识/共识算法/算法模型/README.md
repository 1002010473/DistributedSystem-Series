# 算法对比

分布式一致性，简单的说就是在一个或多个进程提议了一个值后，使系统中所有进程对这个值达成一致。

![简要的一致性描述](https://s1.ax1x.com/2020/08/01/aGlZtK.jpg)

为了就某个值达成一致，每个进程都可以提出自己的提议，最终通过分布式一致性算法，所有正确运行的进程学习到相同的值。工业界对分布式一致性的应用，都是为了构建多副本状态机模型（Replicated State Machine），实现高可用和强一致。

![多副本状态机](https://s1.ax1x.com/2020/08/01/aGGTqH.png)

分布式一致性使多台机器具有相同的状态，运行相同的确定性状态机，在少数机器故障时整体仍能正常工作。

![状态机流程](https://s1.ax1x.com/2020/08/01/aGJtyD.png)

# Paxos

Paxos达成一个决议至少需要两个阶段（Prepare阶段和Accept阶段）。

![Paxos 多阶段描述](https://s1.ax1x.com/2020/08/02/atMCSU.jpg)

Prepare阶段的作用：争取提议权，争取到了提议权才能在Accept阶段发起提议，否则需要重新争取；学习之前已经提议的值。

Accept阶段使提议形成多数派，提议一旦形成多数派则决议达成，可以开始学习达成的决议。Accept阶段若被拒绝需要重新走Prepare阶段。

